# AI Conversation

- Can be repetitively added (to prevent excessive clutter in complex layouts, enhancing visual appeal).
- Has external inputs.
- Has static configuration.
- Triggered execution.
- Core module.

![Image](./imgs/aichat.png)

## Parameter Description

### Conversation Model

Optional conversation models can be configured through [data/config.json](/docs/develop/data_config/chat_models), and multiple model integrations can be achieved through [OneAPI](http://localhost:3000/docs/develop/oneapi).

### Temperature & Reply Limit

Temperature: Lower values result in more focused responses with less verbosity (in practice, the difference might not be substantial).

Reply Limit: Maximum number of reply tokens (effective only for OpenAI models). Please note, this is for reply tokens, not total tokens.

### System Prompt (Overrideable by External Inputs)

Placed at the beginning of the context array with a role of "system," used to guide the model. Specific usage can be referenced in tutorials of various search engines.

### Constraints (Overrideable by External Inputs)

Similar to the system prompt, with a role of "system," but placed before the question to have a stronger guiding effect.

### Referenced Content

Receives an array of external inputs, primarily generated by the "Knowledge Base Search" module or imported from external sources via the Http module. The data structure example is as follows:

```ts
type DataType = {
  kb_id?: string;
  id?: string;
  q: string;
  a: string;
  source?: string;
};
// If content is externally imported, it's best to avoid carrying kb_id and id
const quoteList: DataType[] = [
  { kb_id: '11', id: '222', q: '你还', a: '哈哈', source: '' },
  { kb_id: '11', id: '333', q: '你还', a: '哈哈', source: '' },
  { kb_id: '11', id: '444', q: '你还', a: '哈哈', source: '' }
];
```

## Complete Context Composition

The final data sent to the LLM major model is an array, with the content and order as follows:

```
[
    System Prompt
    Referenced Content
    Chat Records
    Constraints
    Question
]
```